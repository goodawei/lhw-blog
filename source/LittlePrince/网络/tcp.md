TCP 窗口缩放、时间戳和 SACK

Linux TCP 协议栈具有无数个可以更改其行为的 sysctl 旋钮。 这包括可用于接收或发送操作的内存量、套接字的最大数量、可选的特性和协议扩展。

默认套接字的最大数量：1024.


TCP 可以承受的数据传输速率受到几个因素的限制。其中包括：

往返时间(Round trip time)（RTT）这是数据包到达目的地并返回回复所花费的时间。越低越好。


窗口缩放选项： 

窗口缩放 选项告诉对等方，应该使用给定的数字缩放 TCP 标头中的接收窗口值，以获取实际大小。三次握手的时候告知。


在服务器端建立 TCP 连接:

	当连接请求到达的速度快于服务器应用程序可以接受新的传入连接的速度时，连接积压最终将达到其极限。这可能是由于系统配置错误或应用程序中的错误引起的。当一个或多个客户端发送连接请求而不对 “SYN ACK” 响应做出反应时，也会发生这种情况。这将用不完整的连接填充连接队列。这些条目需要几秒钟才会超时。这被称为 “同步泛洪攻击”(syn flood attack)。

https://www.toutiao.com/i6882575775585796615/


TCP报文结构：

	源端口： 4字节 16bit, 目标端口16bit  
	序号：   4字节 32bit 
	确认序号：4字节 32bit
	部首长度：4字节 4bit 预留位 6bit 标志位 6bit：SYN ACK FIN ...  16bit 窗口大小 
	数据段：


为什么是3次握手。

为什么是4次挥手。


