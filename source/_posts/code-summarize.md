---
title: 代码整洁之道之技巧总结
date: 2019-11-30 22:48:12
tags: 设计模式
categories: 设计模式
---

![Coding Summarize][1]

[1]: http://cdn.nicexiangcun.com/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E9%A5%AE%E7%94%A8%E5%9B%BE%E7%89%87

# 优雅的代码应该是什么样的

- 能够满足当前的需求（功能，稳定性，负载能力等）。
- 对未来的需求，能够快速的扩展，修改。
- 出现问题能够快速的定位问题方便修改问题。
- 尽量避免重复，最大程度复用。

针对这些问题，整理出一些自己对于设计模式的理解，其实设计模式就是别人走过的路，踩过的坑，总结出来的优秀经验。总结的代码整洁之道就是如何复用这些经验。

下面是代码整洁之道第一篇：技巧总结 :pray:

<!-- more -->

1.命名非常重要，就为了可读性更好。

2.适当的使用注释，开发新功能，修改别人的bug,关键业务逻辑，要合理的使用注释

3.变量需要初始化 

4.1==$a 和常量比较常量在前,防御编程，避免误写出$a=1

5.防御式编程和契约编程

默认不信任任何外部调用和方法，默认双方遵守契约，任意一方撕毁契约则抛出异常，建议在UI及应用层倾向于防御式编程保证友好及体验，在逻辑层倾向于契约式编程尽早暴露隐患 

6.可控的环境参数 :bug:

代码不受环境的影响，各种魔术常亮，声明字符集，定义包含的绝对路径，错误级别7，自己开发的测试，准生产，生产环境切好等 :spider:

7.PHP结束标记 

纯php语句不要结束标记

<!-- more -->

8.if的使用技巧之“给定初始值” 


9.if的使用技巧之“用"&&" 替换 if” 

```php

if($rand>3){
     $long=5;
}

$rand>3 && $long=5;

```

10.if的使用技巧之“用三元运算符替换if” 


11.if的使用技巧之“去掉多此一举的if” 

```php

if(1==$a){
   return true;
}else{
   return false;
}

return (1==$a);

```

12.表驱动法 map

在php中数组使用的是hashtable，时间复杂度是O(1),运行速度远远高于以上两种，另外书写起来也更简便的多。如果传入的参数是开始未定义的也不会运行查找浪费大量的系统资源。 

13.使用更精悍短小的代码 

函数的最佳最大长度是150行代码，这样的代码比较便于维护，也方便修改，对于某些过于集中的算法函数，可能长度会大于这个长度。不过尽量还是不要超过，短小的才是美好的，短小的便于理解也便于修改，而功能相对单一的代码也就意味着可以复用它的地方会更多，有更好的复用性，另外当程序出问题的时候，测试起来也会相对简单好定位，便于维护修改。 


14.避免使用幻数 ,幻数，简单来说既是我们所说的硬编码. 


15.中间结果赋值给变量 

当一个表达式中嵌套层数过多，逻辑过于复杂的时候，将其拆分成一块块的，将其每一块的结果赋值给中间变量，这样可以降低程序的阅读难度和提高可维护性。 

16.复杂的逻辑表达式做成布尔函数

当某一个判断比较复杂的时候，可以考虑将其做成一个布尔函数，不要怕这个函数里面的代码少，很多时候这样写可以使你的逻辑更容易维护，另外碰到相同逻辑判定的地点还可以直接复用，不需要一处修改处处修改。 


17.永远不要复制粘贴雷同的代码 

大段相同的代码实现类似的但是略有不同的程序功能的时候，我们很容易就回进行复制完后修改，其实这种做法会有很大的问题.

18.备份源代码文件 

