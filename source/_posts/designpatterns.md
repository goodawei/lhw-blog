---
title: designpatterns
date: 2016-05-22 14:48:32
tags: 设计模式
categories: 设计模式
---
# 组合模式 
组合模式相关概念：依赖注入、控制反转
### 依赖注入概念：
一个类如果想使用另一类中的某些方法或者属性，除了继承外，也可以使用组合，组合的含义是将继承或者在构造触发new的过程，提到类的外面去做，采用依赖注入的方式传递对象。（消除了依赖）降低代码耦合程度，提高项目的可维护性。
<!-- more -->
这种注入的缺陷在于：我们的业务层对依赖单元的实例化代码是一个重复、繁琐的过程。
### 控制反转概念：
将类（上层）,所依赖的单元（下层）的实例化过程交由第三方来实现。一个简单的特征，就是类中不对所依赖的单元有诸如 $component = new yii\component\SomeClass（） 的实例化语句。

Yii中为什么要使用DI，像上面所所说的，一个类如果想使用另一类中的某些方法或者属性，除了继承外，也可以使用组合，也就是DI模式，其本质现象就是，我访问我所依赖的单元对象中成员方法或者属性时就像访问本类一样。因为我已经通过DI将本类所依赖的单元注入到了本类中。


### 什么时候是有继承，什么时候使用接口

继承意味着公用，公用的含义：

一 公用的功能、逻辑，意味着具体的，可封装的

二 公用的特性，但是表现不一样，意味着抽象，抽象类

基于以上可以使用继承。

接口，当某些实例拥有一部分区别于其他同类实例的特性，那么这些特性是不适合被这些类继承过来的，那么这些特性可以使用接口，只有适用这些特性的类来实现这个接口。

### 策略 和 多态


### 工厂 和 抽象工厂