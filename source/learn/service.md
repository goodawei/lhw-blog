服务化的目的：

单体应用的缺点： 耦合，相互牵扯，扩展、演进难度大。

微服务的优点：编辑清晰，扩展、技术栈、演进更灵活，但是相应的带来了管理上的难度。

微服务要解决的一些问题：

1. apigateway , 每一个服务都有对外提供接口的能力，服务多了，就需要api网关进行统一管理，网关可以对服务、路由、插件、鉴权等等进行统一管理。

2. 服务间内部调用，rpc框架，可以自严，也可以选开源产品如grpc等。
   
   目前大概使用方向是这样的： PHP为例服务提供者将每一个服务提供的接口规划为一个公共仓库，客户端使用的时候应用层通过composer来获取。而grpc也可以通过官方提供的工具打包各个语言的客户端代码。

   rpc服务端,rpc客户端 通过tcp协议交换。

3. 消息总线，有些场景是不适合选择rpc的，比如下单成功后发优惠券，发积分等等。订单中心不能每次都要去调用优惠中心和积分中心，订单中心需要在消息总线的后台添加一个自己业务下的订单创建成功发布事件。优惠中心、积分中心需要去消息总线的后台找到订单创建成功发布事件，去订阅此事件。

4. 服务治理相关，服务注册、服务发现、业界模式，有边车模式 sidecar. 代表有lsto. 通常会有一个dp（data plane）数据面板负责流量劫持处理。还有一个cp (controll plane) 控制面板。

5. 方法论，DDD 领域驱动 是一套基于业务设计的方法论，与微服务相得益彰。通过 战术、战略相关设计思想，设计出的服务都是业务内聚的。且边界清晰，即便是单体中，服务与服务间也是通过限界上下午隔离的，拆分的时候也很好拆分。需要熟悉的概念有： 限界上下文，通用语言（是根基），领域模型抽象的好与坏与对通用语言的整理和理解有很大关系。聚合根、实体、值对象、服务等，同时还涉及门面、防腐层等思想。


上述第4点的作用，有效统一管理，每个服务的修改更新能够及时发现，避免服务间调用失败。



